# AWS-Security-Analyst-Vulnerability-Management

## Project Overview

In this project I deployed a VM in AWS featuring outdated software and various security misconfigurations.
I then utilized Amazon Inspector to scan for host and network vulnerabilities, recording the results. Following this, I used GuardDuty to scan for any potential malware in the VM.
After Analyzing the scan results, I performed a series of remediation techniques to secure my EC2 instance.

Tools Used: 

- AWS Inspector
- GuardDuty
- EC2 Virtual Machine
- Security Groups

Below I'll walk you through the steps I took to complete this project.

## Initial Setup

To get things started, I first had to create an EC2 instance that would be purposefully misconfigured with weak security and tons of port exposure.

Instance description:
- AMI Name: Windows_Server-2022-English-Full-Base-2023.11.15
- Instance Type: t2.medium
- Platform: Windows

Below is the security group created for this VM. Listed are all of the inbound rules and ports that I purposely opened. Opening these ports makes the VM highly exposed and vulnerable to attackers. 

![inboundrules](https://github.com/LouisXB/AWS-Security-Analyst-Vulnerability-Management/assets/115196076/3fff87d0-0dcb-4644-bc99-94e3dc4bf391)

As seen in the image, there are tons of protocols listed including some insecure protcols that you'd never wanna have open on any machine.
I also included both IPv4 and IPv6 versions.

## Installing depricated software and disabling firewall

After the VM was created I connected to it via RDP.

![connect to instance](https://github.com/LouisXB/AWS-Security-Analyst-Vulnerability-Management/assets/115196076/478b5da7-408a-4ad9-96df-bf5e71625738)

Next, just to make our VM extra vulnerable, I decided to lower the Windows Firewall and give myself an extra remediation step later on.

![disablefirewall](https://github.com/LouisXB/AWS-Security-Analyst-Vulnerability-Management/assets/115196076/980fd704-062e-4128-83f1-17b8b822c533)


Next I proceeded to install a depricated version of Firefox with some known issues. Ideally, a vulnerability scan will pick up on outdated software versions, as they pose a risk to our enviornment. When vendors push software updates, they typically include bug fixes and patches to address any potential vulnerabilities. By installing an old Firefox version, an attacker could take advantage of this depricated software on our machine and cause us trouble later.

![deprecatedfirefox](https://github.com/LouisXB/AWS-Security-Analyst-Vulnerability-Management/assets/115196076/d1458b04-2554-4c44-9658-9f997dd577bc)

![oldfirefox](https://github.com/LouisXB/AWS-Security-Analyst-Vulnerability-Management/assets/115196076/823a7852-5333-4e84-bb10-868f4d9c4b68)


## Starting a Scan with Inspector

After I had a ton of known vulnerabilities, it was time to pop open Amazon Inspector and see what it could find.

The results from my first scan are shown below.

![assessmentfindings](https://github.com/LouisXB/AWS-Security-Analyst-Vulnerability-Management/assets/115196076/c8f1e98b-a935-4451-9b9b-dfa9f243439f)

Inspector accurately picked up on all the open ports that possed a risk to my VM. I was able to dive into each of the findings and also download a findings report that included detailed information about the vulnerability and recommendations to fix it.

![findingstable](https://github.com/LouisXB/AWS-Security-Analyst-Vulnerability-Management/assets/115196076/f3c32f31-2ca1-4537-a9b3-ae43bafefb63)
![findingsreport](https://github.com/LouisXB/AWS-Security-Analyst-Vulnerability-Management/assets/115196076/e1d1f12d-9c3e-4871-9804-a5f253b3ed6f)

*NOTE: I was initially going to run a scan with Nessus Essentials and compare results, but I ran into a number of issues so I decided to save it for a future project.

## On-Demand Malware Scan with GuardDuty

Next, I wanted to run a malware scan on my VM using Amazon GuardDuty. I was curious if Amazon would pick up on the outdated Firefox as potential malware or simply give me a warning about it since Inspector didn't. I also wanted to gain familiarity with how to run malware scans in AWS.

To execute the malware scan, I navigated to "malware protection" in GuardDuty, and scrolled down to "On-demand malware scan". After I found the ARN for my EC2 instance, I input it into the text box and started the On-demand scan.

![malware scan](https://github.com/LouisXB/AWS-Security-Analyst-Vulnerability-Management/assets/115196076/f22f0737-bde9-4513-b96f-0eabe85a3a80)

The scan took about 25-30 minutes to complete and came back with a "clean" result.

![malwarescanresults](https://github.com/LouisXB/AWS-Security-Analyst-Vulnerability-Management/assets/115196076/14a01ba5-bf5c-4896-82ac-76a3496fe114)


## Remediation and Clean-up

To remediate the vulnerabilties found earlier, I simply went into my security group and deleted all of the ports I previously had exposed.

Next I ran a second vulnerability scan which came back with 0 findings!
![nofindings](https://github.com/LouisXB/AWS-Security-Analyst-Vulnerability-Management/assets/115196076/8985e8ce-e35d-4bf8-adfd-6fad320e69f6)

Following this, I also went back and re-enabled the Windows Firewall.

I then went back to my security group and added inbound RDP only from my IP address. 
![updated security group](https://github.com/LouisXB/AWS-Security-Analyst-Vulnerability-Management/assets/115196076/f118a854-2845-447f-9c91-e074282d0874)

After my project was successfully completed, I cleaned up my AWS enviornment by terminating my instance and deleted associated resources to avoid further cost.

## Conclusion

I was suprised that neither Inspector nor GuardDuty picked up on the outdated Firefox version or provide some level of caution against it. However, I was glad to see that Inspector picked up on the numerous open ports and provided a very thorough report with remediation steps.

This project was simple yet very impactful in furthering my hands-on experience with scanning my enviornment for threats or vulnerabilities, and performing remediations based on findings.
Working in AWS allowed me to gain the this practical experience while simultaneously granting me the oppertunity to grow in my familiarity with the cloud and cloud native security tools.


